"use strict";var GLoader={version:"1.7",tmpScriptData:[],loadScript:function(e,t){e||t&&t();var n=!1,o=e.indexOf(".js")>-1?"js":"css",r={status:!1,message:""},a="js"==o?document.createElement("script"):document.createElement("link");function s(){n||(n=!0,r.status=!0,r.message="Script was loaded successfully",t&&t(r))}function i(){n||"complete"===a.readyState&&s()}function l(){n||(n=!0,r.status=!1,r.message="Failed to load script.",t&&t(r))}a.setAttribute("data-loader","GLoader"),"js"==o?(a.setAttribute("type","text/javascript"),isLocal?a.setAttribute("src",e):GLoader.loadFile(e,{onComplete:function(n){GLoader.embedScript(a,GLoader.getFileName(e),n),t&&t(r)},onError:l})):(a.setAttribute("rel","stylesheet"),a.setAttribute("type","text/css"),a.setAttribute("href",e)),"js"==o?document.body.appendChild(a):(document.head.appendChild(a),a.onload=s,a.onreadystatechange=i,a.onerror=l),isLocal&&(a.onload=s,a.onreadystatechange=i,a.onerror=l)},isExisted:function(e){var t=!1,n=this.getFileName(e),o="js_"+n;if(0!=document.getElementsByName(o).length)return!0;for(var r=document.getElementsByTagName("script"),a=0;a<r.length;a++)if(r[a].src){var s=r[a].src;this.getFileName(s).toLowerCase()==n.toLowerCase()&&(t=!0)}return t},embedScript:function(e,t,n){if((e.getAttribute("name")||"").isEmpty()){e.setAttribute("name",name)}isLocal||e.removeAttribute("name"),e.textContent=n},loadScripts:function(e,t){var n=(t=t||{}).onComplete||null,o=t.onProcess||null;if(0!=e.length)if(isLocal){var r=0,a=e.length;GLoader.loadScript(e[r],(function t(s){o&&o(r/a),++r==a?(s.status=!0,s.message="All scripts were loaded.",o&&o(1),n&&n(s)):GLoader.isExisted(e[r])?(console.log('[GLoader] The script "'+e[r]+'" was existed -> Skipped.'),t&&t()):GLoader.loadScript(e[r],t)}))}else{e.filter((function(e){return e.indexOf(".css")>-1})).map((function(e){return GLoader.loadScript(e)}));for(var s=[],i=[],l=0,u=0;u<e.length;u++){var d=e[u];if(!(d.indexOf(".js")<=-1)){var c="js_"+GLoader.getFileName(d);if(!GLoader.isExisted(GLoader.getFileName(d))){var p=document.createElement("script");p.setAttribute("name",c),p.setAttribute("data-loader","GLoader"),p.setAttribute("type","text/javascript"),document.body.appendChild(p),s.push(e[u]),i.push({id:l,url:d,name:c}),l++}}}var f=-1,m=[];this.loadMultiFile(s,{maxQueue:7,onProgress:function(e,t,n){var r=i.find((function(e){return e.url==t}));r.data=n,m.push(r),m.find((function(e){return e.id==f+1}))&&(m.sort((function(e,t){return e.id-t.id})),function(){for(var e=0;e<m.length;e++){var t=m[e];if(t.id!=f+1)return;f++,GLoader.embedScript(document.getElementsByName(t.name)[0],t.name,t.data),m.shift(),e--}}()),null!=o&&o(e)},onComplete:function(){n&&n()}})}else n&&n()},loadPhoto:function(e,t,n){var o=new Image;o.onload=function(){void 0!==n&&n(e)},o.onerror=function(){void 0!==n&&n(null)},o.src=e},loadPhotos:function(e,t,n){var o=e,r=0,a=o.length,s={status:!1,message:""},i=[],l=o[r];this.loadPhoto(l,t,(function e(u){++r==a?(s.status=!0,s.message="All photos were loaded.",s.photos=i,n&&n(s)):(i.push(u),l=o[r],GLoader.loadPhoto(l,t,e))}))},loadFile:function(e,t){var n=(t=null!=t?t:{}).hasOwnProperty("onProgress")?t.onProgress:null,o=t.hasOwnProperty("onComplete")?t.onComplete:null,r=t.hasOwnProperty("onError")?t.onError:null,a=t.hasOwnProperty("responseType")?t.responseType:"text",s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType=a,s.onprogress=function(e){var t=e.loaded/e.total;null!=n&&n(t)},s.onreadystatechange=function(){s.readyState,s.readyState,s.readyState},s.onload=function(){s.readyState===s.DONE&&parseInt(s.status.toString())<400?null!=o&&o(s.response,e):null!=r&&r("Status error "+this.status,"",e)},s.onerror=function(e){console.log(e),null!=r&&r("Loading error")},s.send()},loadMultiFile:function(e,t){var n=this,o=(t=null!=t?t:{}).hasOwnProperty("onProgress")?t.onProgress:null,r=t.hasOwnProperty("onComplete")?t.onComplete:null,a=t.hasOwnProperty("onError")?t.onError:null,s=t.hasOwnProperty("maxQueue")?t.maxQueue:5,i=t.hasOwnProperty("responseType")?t.responseType:"text",l=0,u=0,d=0,c=0;if(0!=e.length&&null!=e||L(),e.length<s)for(var p=0;p<e.length;p++){var f=e[p];n.loadFile(f,{responseType:i,onError:g,onComplete:y})}else m();function m(){if(u<e.length&&l<s){l++;var t=e[u];u++,n.loadFile(t,{responseType:i,onComplete:v,onError:g}),m()}}function h(t,n){var r=++d/e.length;o&&o(r,t,n)}function g(e,t,n){a&&a(e),void 0!==t&&v(t,n)}function y(t,n){c++,h(n,t),c>=e.length&&L()}function v(t,n){l--,h(n,t),u>=e.length&&0==l?L():m()}function L(){r&&r()}},getFileName:function(e){e.indexOf("?")>-1&&(e=e.substring(0,e.indexOf("?")));var t=e.indexOf("\\")>=0?e.lastIndexOf("\\"):e.lastIndexOf("/"),n=e.substring(t);return 0!==n.indexOf("\\")&&0!==n.indexOf("/")||(n=n.substring(1)),n}};