THREE.OrthographicTrackballControls=function(e,t){var o=this,n=-1,s=0,i=1,c=2,a=3,r=4;this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.radius=0,this.rotateSpeed=1,this.zoomSpeed=1.2,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.noRoll=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.keys=[65,83,68],this.target=new THREE.Vector3;var h=!0,p=n,d=n,u=new THREE.Vector3,m=new THREE.Vector3,g=new THREE.Vector3,l=new THREE.Vector2,E=new THREE.Vector2,v=0,b=0,y=new THREE.Vector2,w=new THREE.Vector2;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.left0=this.object.left,this.right0=this.object.right,this.top0=this.object.top,this.bottom0=this.object.bottom;var f={type:"change"},j={type:"start"},R={type:"end"};this.handleResize=function(){if(this.domElement===document)this.screen.left=0,this.screen.top=0,this.screen.width=window.innerWidth,this.screen.height=window.innerHeight;else{var e=this.domElement.getBoundingClientRect(),t=this.domElement.ownerDocument.documentElement;this.screen.left=e.left+window.pageXOffset-t.clientLeft,this.screen.top=e.top+window.pageYOffset-t.clientTop,this.screen.width=e.width,this.screen.height=e.height}this.radius=.5*Math.min(this.screen.width,this.screen.height),this.left0=this.object.left,this.right0=this.object.right,this.top0=this.object.top,this.bottom0=this.object.bottom};var L,T,k,H,V,Y,X=(L=new THREE.Vector2,function(e,t){return L.set((e-o.screen.left)/o.screen.width,(t-o.screen.top)/o.screen.height),L}),z=function(){var e=new THREE.Vector3,t=new THREE.Vector3,n=new THREE.Vector3;return function(s,i){n.set((s-.5*o.screen.width-o.screen.left)/o.radius,(.5*o.screen.height+o.screen.top-i)/o.radius,0);var c=n.length();return o.noRoll?c<Math.SQRT1_2?n.z=Math.sqrt(1-c*c):n.z=.5/c:c>1?n.normalize():n.z=Math.sqrt(1-c*c),u.copy(o.object.position).sub(o.target),e.copy(o.object.up).setLength(n.y),e.add(t.copy(o.object.up).cross(u).setLength(n.x)),e.add(u.setLength(n.z)),e}}();function C(e){!1!==o.enabled&&(window.removeEventListener("keydown",C),d=p,p===n&&(e.keyCode!==o.keys[s]||o.noRotate?e.keyCode!==o.keys[i]||o.noZoom?e.keyCode!==o.keys[c]||o.noPan||(p=c):p=i:p=s))}function M(e){!1!==o.enabled&&(p=d,window.addEventListener("keydown",C,!1))}function D(e){!1!==o.enabled&&(e.preventDefault(),e.stopPropagation(),p===n&&(p=e.button),p!==s||o.noRotate?p!==i||o.noZoom?p!==c||o.noPan||(y.copy(X(e.pageX,e.pageY)),w.copy(y)):(l.copy(X(e.pageX,e.pageY)),E.copy(l)):(m.copy(z(e.pageX,e.pageY)),g.copy(m)),document.addEventListener("mousemove",P,!1),document.addEventListener("mouseup",x,!1),o.dispatchEvent(j))}function P(e){!1!==o.enabled&&(e.preventDefault(),e.stopPropagation(),p!==s||o.noRotate?p!==i||o.noZoom?p!==c||o.noPan||w.copy(X(e.pageX,e.pageY)):E.copy(X(e.pageX,e.pageY)):g.copy(z(e.pageX,e.pageY)))}function x(e){!1!==o.enabled&&(e.preventDefault(),e.stopPropagation(),p=n,document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",x),o.dispatchEvent(R))}function O(e){!1!==o.enabled&&(e.preventDefault(),e.stopPropagation(),l.y+=.01*e.deltaY,o.dispatchEvent(j),o.dispatchEvent(R))}function S(e){if(!1!==o.enabled){switch(e.touches.length){case 1:p=a,m.copy(z(e.touches[0].pageX,e.touches[0].pageY)),g.copy(m);break;case 2:p=r;var t=e.touches[0].pageX-e.touches[1].pageX,s=e.touches[0].pageY-e.touches[1].pageY;b=v=Math.sqrt(t*t+s*s);var i=(e.touches[0].pageX+e.touches[1].pageX)/2,c=(e.touches[0].pageY+e.touches[1].pageY)/2;y.copy(X(i,c)),w.copy(y);break;default:p=n}o.dispatchEvent(j)}}function A(e){if(!1!==o.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:g.copy(z(e.touches[0].pageX,e.touches[0].pageY));break;case 2:var t=e.touches[0].pageX-e.touches[1].pageX,s=e.touches[0].pageY-e.touches[1].pageY;b=Math.sqrt(t*t+s*s);var i=(e.touches[0].pageX+e.touches[1].pageX)/2,c=(e.touches[0].pageY+e.touches[1].pageY)/2;w.copy(X(i,c));break;default:p=n}}function F(e){if(!1!==o.enabled){switch(e.touches.length){case 1:g.copy(z(e.touches[0].pageX,e.touches[0].pageY)),m.copy(g);break;case 2:v=b=0;var t=(e.touches[0].pageX+e.touches[1].pageX)/2,s=(e.touches[0].pageY+e.touches[1].pageY)/2;w.copy(X(t,s)),y.copy(w)}p=n,o.dispatchEvent(R)}}function Q(e){e.preventDefault()}this.rotateCamera=(T=new THREE.Vector3,k=new THREE.Quaternion,function(){var e=Math.acos(m.dot(g)/m.length()/g.length());e&&(T.crossVectors(m,g).normalize(),e*=o.rotateSpeed,k.setFromAxisAngle(T,-e),u.applyQuaternion(k),o.object.up.applyQuaternion(k),g.applyQuaternion(k),o.staticMoving?m.copy(g):(k.setFromAxisAngle(T,e*(o.dynamicDampingFactor-1)),m.applyQuaternion(k)),h=!0)}),this.zoomCamera=function(){if(p===r){var e=b/v;v=b,o.object.zoom*=e,h=!0}else{e=1+(E.y-l.y)*o.zoomSpeed;Math.abs(e-1)>1e-6&&e>0&&(o.object.zoom/=e,o.staticMoving?l.copy(E):l.y+=(E.y-l.y)*this.dynamicDampingFactor,h=!0)}},this.panCamera=(H=new THREE.Vector2,V=new THREE.Vector3,Y=new THREE.Vector3,function(){if(H.copy(w).sub(y),H.lengthSq()){var e=(o.object.right-o.object.left)/o.object.zoom,t=(o.object.top-o.object.bottom)/o.object.zoom;H.x*=e,H.y*=t,Y.copy(u).cross(o.object.up).setLength(H.x),Y.add(V.copy(o.object.up).setLength(H.y)),o.object.position.add(Y),o.target.add(Y),o.staticMoving?y.copy(w):y.add(H.subVectors(w,y).multiplyScalar(o.dynamicDampingFactor)),h=!0}}),this.update=function(){u.subVectors(o.object.position,o.target),o.noRotate||o.rotateCamera(),o.noZoom||(o.zoomCamera(),h&&o.object.updateProjectionMatrix()),o.noPan||o.panCamera(),o.object.position.addVectors(o.target,u),o.object.lookAt(o.target),h&&(o.dispatchEvent(f),h=!1)},this.reset=function(){p=n,d=n,o.target.copy(o.target0),o.object.position.copy(o.position0),o.object.up.copy(o.up0),u.subVectors(o.object.position,o.target),o.object.left=o.left0,o.object.right=o.right0,o.object.top=o.top0,o.object.bottom=o.bottom0,o.object.lookAt(o.target),o.dispatchEvent(f),h=!1},this.dispose=function(){this.domElement.removeEventListener("contextmenu",Q,!1),this.domElement.removeEventListener("mousedown",D,!1),this.domElement.removeEventListener("wheel",O,!1),this.domElement.removeEventListener("touchstart",S,!1),this.domElement.removeEventListener("touchend",F,!1),this.domElement.removeEventListener("touchmove",A,!1),document.removeEventListener("mousemove",P,!1),document.removeEventListener("mouseup",x,!1),window.removeEventListener("keydown",C,!1),window.removeEventListener("keyup",M,!1)},this.domElement.addEventListener("contextmenu",Q,!1),this.domElement.addEventListener("mousedown",D,!1),this.domElement.addEventListener("wheel",O,!1),this.domElement.addEventListener("touchstart",S,!1),this.domElement.addEventListener("touchend",F,!1),this.domElement.addEventListener("touchmove",A,!1),window.addEventListener("keydown",C,!1),window.addEventListener("keyup",M,!1),this.handleResize(),this.update()},THREE.OrthographicTrackballControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrthographicTrackballControls.prototype.constructor=THREE.OrthographicTrackballControls;